# 需求规格说明书

## 项目简介

**项目名称**: 猪猪养基 H5 应用

**产品定位**: 为进阶基金投资者提供"数据决策工具"的H5应用,而非单纯的交易通道。

**目标用户**: 有一定知识储备、注重数据分析和长期资产配置的进阶基金投资者。

**核心价值**: 通过多维度的数据分析工具,帮助投资者做出更理性的基金投资决策。

## 术语表

| 术语 | 定义 |
|------|------|
| **估值分位点** | 当前估值指标(PE/PB/PS等)在历史数据中的百分位位置,用于判断低估/正常/高估状态 |
| **回撤** | 从峰值到谷值的下跌幅度,用于衡量风险 |
| **夏普比率** | 承担单位风险获得的超额收益,用于衡量风险调整后收益 |
| **波动率** | 价格或收益率的波动程度,用于衡量投资风险 |
| **换手率** | 基金买卖证券的频率,反映基金经理的交易活跃度 |
| **风格箱** | 将基金按投资风格(大盘/中盘/小盘 × 价值/成长/平衡)分类的九宫格 |
| **定投** | 定期定额投资基金的投资方式 |
| **智能定投** | 基于估值、均线等条件调整定投金额的定投策略 |

## 需求清单

### 1. 智能选基系统

#### 需求 1.1: 基金多维筛选器

**用户故事**: 作为进阶投资者,我希望通过多维度筛选器快速找到符合条件的基金,以便缩小投资标的范围。

**验收标准**:

1. WHEN 用户进入基金筛选页面,系统 SHALL 展示包含标签化筛选和量化指标筛选的筛选界面。

2. WHEN 用户选择基金类型(股票型/混合型/债券型/货币型/指数型),系统 SHALL 更新基金列表以仅显示符合所选类型的基金。

3. WHEN 用户选择特定行业标签,系统 SHALL 更新基金列表以仅显示投资该行业的基金。

4. WHEN 用户设置基金规模范围,系统 SHALL 更新基金列表以仅显示规模在指定范围内的基金。

5. WHEN 用户选择基金经理,系统 SHALL 更新基金列表以仅显示该基金经理管理的基金。

6. WHEN 用户设置收益率区间,系统 SHALL 更新基金列表以仅显示收益率在指定区间内的基金。

7. WHEN 用户设置最大回撤上限,系统 SHALL 更新基金列表以仅显示最大回撤低于该值的基金。

8. WHEN 用户设置夏普比率下限,系统 SHALL 更新基金列表以仅显示夏普比率高于该值的基金。

9. WHEN 用户点击"重置"按钮,系统 SHALL 清除所有筛选条件并显示全部基金。

10. WHEN 用户应用多个筛选条件,系统 SHALL 显示同时满足所有条件的基金。

#### 需求 1.2: 动态排行榜单

**用户故事**: 作为进阶投资者,我希望查看各类别表现优异的基金,以便快速发现优质投资标的。

**验收标准**:

1. WHEN 用户进入排行榜页面,系统 SHALL 显示默认时间范围(近一月)的收益率排行榜。

2. WHEN 用户选择时间范围(日/周/月/季/年),系统 SHALL 更新排行榜以显示对应时间范围的基金排名。

3. WHEN 用户选择榜单类型(收益率榜/稳定性榜/创新高榜),系统 SHALL 更新排行榜以显示对应类型的基金排名。

4. WHILE 系统显示排行榜,系统 SHALL 在榜单顶部标注数据更新时间。

5. WHEN 用户点击排行榜中的基金,系统 SHALL 跳转到该基金的详情页面。

6. WHEN 用户在排行榜页面停留超过10秒,系统 SHALL 自动刷新榜单数据。

7. WHEN 收盘后数据更新完成,系统 SHALL 重新计算并更新排行榜数据。

#### 需求 1.3: 主题基金发现

**用户故事**: 作为进阶投资者,我希望查看当前热门主题的相关基金,以便把握市场投资机会。

**验收标准**:

1. WHEN 用户进入主题发现页面,系统 SHALL 显示当前运营配置的热门主题列表(如科创50、碳中和、新能源等)。

2. WHEN 用户点击某个主题,系统 SHALL 展示该主题的简介和相关基金列表。

3. WHILE 系统显示主题基金列表,系统 SHALL 显示每只基金的主题相关性评分。

4. WHEN 用户关注某个主题,系统 SHALL 在首页显示该主题的最新动态和相关基金表现。

5. WHEN 运营人员配置新的热门主题,系统 SHALL 在主题发现页面更新主题列表。

6. WHEN 用户搜索基金名称或代码,系统 SHALL 在搜索结果中标注基金所属主题。

### 2. 深度分析系统

#### 需求 2.1: 基金单体业绩分析

**用户故事**: 作为进阶投资者,我希望全面了解基金的历史业绩表现,以便评估基金的投资价值。

**验收标准**:

1. WHEN 用户进入基金详情页面,系统 SHALL 显示基金基础信息(名称、代码、类型、规模、成立日期等)。

2. WHEN 用户查看业绩分析模块,系统 SHALL 显示收益走势对比图(基金净值 vs 基准指数 vs 同类平均)。

3. WHEN 用户切换时间区间(近一月/三月/六月/一年/三年/成立以来),系统 SHALL 更新收益走势图以显示对应区间的数据。

4. WHEN 用户查看阶段收益分析,系统 SHALL 显示不同时间区间的累计收益率和年化收益率。

5. WHEN 用户查看风险分析模块,系统 SHALL 显示波动率、最大回撤、下行风险指标。

6. WHEN 用户查看收益稳定性评分,系统 SHALL 显示基于收益波动和回撤控制的稳定性评分(1-10分)。

7. WHILE 系统显示业绩分析数据,系统 SHALL 标注数据计算方法和数据区间。

#### 需求 2.2: 基金风险扫描

**用户故事**: 作为进阶投资者,我希望快速了解基金的风险特征,以便匹配自身风险承受能力。

**验收标准**:

1. WHEN 用户查看风险扫描模块,系统 SHALL 显示基金的波动率指标。

2. WHEN 用户查看风险扫描模块,系统 SHALL 显示基金历史最大回撤及发生时间。

3. WHEN 用户查看风险扫描模块,系统 SHALL 显示基金的下行风险指标。

4. WHEN 用户查看风险扫描模块,系统 SHALL 显示收益稳定性评分。

5. WHEN 用户点击风险指标,系统 SHALL 展示该指标的历史走势图。

6. WHEN 基金风险指标超过同类平均水平20%,系统 SHALL 显示"高风险"警示标签。

7. WHILE 系统显示风险数据,系统 SHALL 提供同类平均和同类前10%的对比数据。

#### 需求 2.3: 基金持仓穿透分析

**用户故事**: 作为进阶投资者,我希望了解基金的底层持仓和投资风格,以便判断基金的真实风险和投资方向。

**验收标准**:

1. WHEN 用户查看持仓分析模块,系统 SHALL 显示前十大重仓股票列表及其占基金净值比例。

2. WHEN 用户查看持仓分析模块,系统 SHALL 显示前五大重仓债券列表及其占基金净值比例。

3. WHEN 用户查看行业集中度分析,系统 SHALL 显示基金在各行业的资产配置比例饼图。

4. WHEN 用户查看换手率分析,系统 SHALL 显示基金的最近一年换手率及同类对比。

5. WHEN 用户点击某只重仓股/债,系统 SHALL 跳转到该证券的详情页面。

6. WHILE 系统显示持仓数据,系统 SHALL 标注数据披露周期(季度/年度)。

7. IF 基金持仓未更新超过90天,系统 SHALL 显示"持仓数据可能过期"的提示。

#### 需求 2.4: 基金经理评价

**用户故事**: 作为进阶投资者,我希望了解基金经理的履历和投资能力,以便评估基金的长期管理质量。

**验收标准**:

1. WHEN 用户查看基金经理模块,系统 SHALL 显示基金经理的基本信息(姓名、学历、从业年限、现任职公司)。

2. WHEN 用户查看基金经理模块,系统 SHALL 显示基金经理的生涯年化回报率。

3. WHEN 用户查看基金经理模块,系统 SHALL 显示基金经理管理规模变迁的时间序列图。

4. WHEN 用户查看基金经理模块,系统 SHALL 显示基金经理的风格箱位置(大盘/中盘/小盘 × 价值/成长/平衡)。

5. WHEN 基金经理管理该基金超过3年,系统 SHALL 显示该经理管理期间的基金业绩。

6. WHEN 基金经理离职或更换,系统 SHALL 在基金经理模块显示"经理变更"提示。

7. WHEN 用户点击基金经理姓名,系统 SHALL 展示该经理管理的其他基金列表。

### 3. 估值系统(核心特色)

#### 需求 3.1: 估值数据采集与计算

**用户故事**: 作为进阶投资者,我希望看到各类指数和行业的当前估值水平,以便判断投资时机。

**验收标准**:

1. WHEN 系统每日收盘后,系统 SHALL 从交易所和指数公司采集PE、PB、PS、股息率等估值数据。

2. WHEN 系统采集到估值数据,系统 SHALL 清洗数据并处理异常值。

3. WHEN 系统完成数据清洗,系统 SHALL 计算当前值在5年和10年历史区间中的分位点(百分位)。

4. WHEN 系统计算分位点,系统 SHALL 根据行业特性选择合适指标(周期行业用PB,成长行业用PS)。

5. WHILE 系统计算分位点,系统 SHALL 使用滚动窗口算法确保分位点计算的准确性。

6. WHEN 系统完成分位点计算,系统 SHALL 预计算并缓存估值数据以优化查询性能。

#### 需求 3.2: 估值仪表盘

**用户故事**: 作为进阶投资者,我希望通过直观的可视化仪表盘快速了解各指数和行业的估值状态,以便把握市场整体机会。

**验收标准**:

1. WHEN 用户进入估值仪表盘页面,系统 SHALL 显示主要指数和行业的当前估值状态卡片。

2. WHEN 估值分位点小于30%,系统 SHALL 用绿色标注该指数/行业为"低估"状态。

3. WHEN 估值分位点介于30%-70%,系统 SHALL 用黄色标注该指数/行业为"正常"状态。

4. WHEN 估值分位点大于70%,系统 SHALL 用红色标注该指数/行业为"高估"状态。

5. WHEN 用户点击估值卡片,系统 SHALL 展示该指数/行业的详细估值数据(PE/PB/PS当前值、历史分位点、历史走势图)。

6. WHILE 系统显示估值仪表盘,系统 SHALL 在每个估值卡片上显示分位点百分数和更新时间。

7. WHEN 系统更新估值数据,系统 SHALL 刷新估值仪表盘的颜色编码和数值。

#### 需求 3.3: 估值榜单

**用户故事**: 作为进阶投资者,我希望查看按估值分位点排序的榜单,以便快速发现被低估的投资机会。

**验收标准**:

1. WHEN 用户进入估值榜单页面,系统 SHALL 显示所有指数和行业按估值分位点升序排列的榜单。

2. WHEN 用户点击榜单表头,系统 SHALL 支持按分位点、PE值、PB值、PS值等指标重新排序。

3. WHEN 用户筛选指数类型(宽基指数/行业指数/主题指数),系统 SHALL 更新榜单以仅显示对应类型的指数。

4. WHILE 系统显示估值榜单,系统 SHALL 在每个指数旁边显示跟踪该指数的基金数量。

5. WHEN 用户点击指数名称,系统 SHALL 跳转到该指数的估值详情页面。

6. WHEN 用户点击基金数量,系统 SHALL 展示跟踪该指数的所有基金列表。

#### 需求 3.4: 估值历史走势图

**用户故事**: 作为进阶投资者,我希望查看指数估值的历史走势和分位点区域,以便判断当前估值在历史中的位置。

**验收标准**:

1. WHEN 用户查看指数估值详情,系统 SHALL 显示该指数PE/PB/PS的历史走势折线图。

2. WHEN 系统显示历史走势图,系统 SHALL 在图表上标注当前估值点的位置。

3. WHEN 系统显示历史走势图,系统 SHALL 用不同颜色区域标注低估(0-30%)、正常(30-70%)、高估(70-100%)区间。

4. WHEN 用户切换估值指标(PE/PB/PS),系统 SHALL 更新历史走势图以显示所选指标的曲线。

5. WHEN 用户切换时间范围(1年/3年/5年/10年/全部),系统 SHALL 更新历史走势图的时间区间。

6. WHEN 用户在走势图上拖动或点击,系统 SHALL 显示该时间点的详细估值数据。

#### 需求 3.5: 估值定投信号

**用户故事**: 作为进阶投资者,我希望基于估值水平获得定投建议,以便在低估时加大投入,高估时控制风险。

**验收标准**:

1. WHEN 估值分位点小于30%,系统 SHALL 显示"低估区域,建议加大定投"的信号。

2. WHEN 估值分位点介于30%-70%,系统 SHALL 显示"估值正常,建议正常定投"的信号。

3. WHEN 估值分位点大于70%,系统 SHALL 显示"高估区域,建议注意风险"的信号。

4. WHEN 用户关注某个指数,系统 SHALL 在首页显示该指数的最新定投信号。

5. WHEN 估值定投信号状态改变(如从低估变为正常),系统 SHALL 向关注该指数的用户推送通知。

6. WHILE 系统显示定投信号,系统 SHALL 同时显示信号基于的分位点值和更新时间。

7. WHEN 用户点击定投信号,系统 SHALL 展示该指数跟踪基金的快速申购入口。

#### 需求 3.6: 估值定投策略回测

**用户故事**: 作为进阶投资者,我希望回测基于估值的定投策略历史表现,以便验证该策略的有效性。

**验收标准**:

1. WHEN 用户进入估值定投回测页面,系统 SHALL 显示回测参数配置表单。

2. WHEN 用户配置定投金额、定投频率(日/周/月)、回测时间区间等参数,系统 SHALL 启动回测计算。

3. WHEN 用户配置估值定投规则(如"PE<30%时加倍定投","PE>70%时暂停定投"),系统 SHALL 应用该规则进行回测。

4. WHEN 系统完成回测计算,系统 SHALL 显示策略累计收益曲线、普通定投对比曲线、指数基准曲线。

5. WHEN 系统显示回测结果,系统 SHALL 显示策略的累计收益率、年化收益率、最大回撤、夏普比率等关键指标。

6. WHEN 系统显示回测结果,系统 SHALL 显示策略与普通定投的收益率差异和回撤差异。

7. WHILE 系统显示回测结果,系统 SHALL 标注"回测仅供参考,不保证未来收益"的风险提示。

8. WHEN 系统进行回测计算,系统 SHALL 考虑申购费率、管理费率、分红等实际投资成本。

### 4. 组合管理系统

#### 需求 4.1: 持仓跟踪

**用户故事**: 作为进阶投资者,我希望跟踪我的实际基金持仓,以便实时掌握整体投资状况。

**验收标准**:

1. WHEN 用户进入持仓页面,系统 SHALL 显示用户持有的所有基金列表(名称、代码、持有份额、持有成本、当前市值)。

2. WHEN 用户查看持仓页面,系统 SHALL 显示组合整体总市值、今日盈亏、累计盈亏、累计收益率。

3. WHEN 用户查看持仓页面,系统 SHALL 显示资产分布饼图(按基金类型、按行业、按风格维度)。

4. WHEN 用户手动添加基金持仓,系统 SHALL 支持输入基金代码、持有份额、持有成本。

5. WHEN 用户编辑持仓,系统 SHALL 支持修改持有份额或删除持仓。

6. WHILE 系统显示持仓数据,系统 SHALL 在每个交易日收盘后更新基金净值和持仓市值。

7. WHEN 用户导入第三方平台持仓(如天天基金、蛋卷),系统 SHALL 通过API导入持仓数据。

#### 需求 4.2: 组合风险诊断

**用户故事**: 作为进阶投资者,我希望了解我的投资组合的风险特征,以便优化资产配置降低风险。

**验收标准**:

1. WHEN 用户查看组合风险诊断,系统 SHALL 显示组合整体波动率指标。

2. WHEN 用户查看组合风险诊断,系统 SHALL 显示组合最大回撤及发生时间。

3. WHEN 用户查看组合风险诊断,系统 SHALL 显示组合中各基金的相关性矩阵热力图。

4. WHEN 用户查看组合风险诊断,系统 SHALL 显示组合在各类行业和风格上的暴露度分析。

5. WHEN 组合在单一行业暴露度超过50%,系统 SHALL 显示"行业集中度过高"风险提示。

6. WHEN 组合在单一风格暴露度超过70%,系统 SHALL 显示"风格过于集中"风险提示。

7. WHEN 组合相关性矩阵显示多只基金高度相关(相关系数>0.8),系统 SHALL 显示"基金重复配置"风险提示。

8. WHEN 用户点击风险提示,系统 SHALL 提供具体的调仓建议。

#### 需求 4.3: 模拟组合

**用户故事**: 作为进阶投资者,我希望创建模拟组合测试投资策略,以便在不实际承担风险的情况下验证策略可行性。

**验收标准**:

1. WHEN 用户进入模拟组合页面,系统 SHALL 显示创建新模拟组合的入口。

2. WHEN 用户创建模拟组合,系统 SHALL 支持输入组合名称、初始资金、建仓时间。

3. WHEN 用户向模拟组合添加基金,系统 SHALL 支持设置各基金的配置比例。

4. WHEN 系统创建模拟组合,系统 SHALL 模拟从建仓日开始的组合表现。

5. WHEN 用户查看模拟组合,系统 SHALL 显示模拟持仓、累计收益率、净值曲线、风险指标。

6. WHEN 用户对比多个模拟组合,系统 SHALL 显示各组合的收益率对比图和风险指标对比表。

7. WHEN 用户删除模拟组合,系统 SHALL 移除该组合及所有相关数据。

#### 需求 4.4: 调仓提醒

**用户故事**: 作为进阶投资者,我希望获得基于市场变化或自定义规则的调仓建议,以便及时优化投资组合。

**验收标准**:

1. WHEN 基金估值从低估变为高估,系统 SHALL 向持仓该基金的用户推送"考虑减仓"提醒。

2. WHEN 基金经理发生变更,系统 SHALL 向持仓该基金的用户推送"经理变更"提醒。

3. WHEN 组合在某一行业暴露度超过用户设定的阈值,系统 SHALL 推送"行业配置失衡"提醒。

4. WHEN 用户设置自定义调仓规则(如"单只基金涨幅超过30%则止盈"),系统 SHALL 监控规则触发条件。

5. WHEN 自定义调仓规则触发,系统 SHALL 推送对应的调仓提醒并说明触发原因。

6. WHEN 用户查看调仓提醒,系统 SHALL 显示具体的调仓建议(如"建议将XX基金仓位从30%降至20%")。

7. WHEN 用户关闭某个提醒类型,系统 SHALL 不再推送该类型的调仓提醒。

### 5. 工具与资讯系统

#### 需求 5.1: 定投计算器

**用户故事**: 作为进阶投资者,我希望使用定投计算器模拟不同定投策略的预期收益,以便选择最优定投方案。

**验收标准**:

1. WHEN 用户进入定投计算器页面,系统 SHALL 显示普通定投参数配置表单。

2. WHEN 用户输入定投金额、定投频率、预期收益率、投资时长等参数,系统 SHALL 计算并显示预期收益。

3. WHEN 用户选择智能定投模式(估值定投/均线定投),系统 SHALL 显示额外的智能定投参数配置。

4. WHEN 用户配置估值定投规则(如"PE<30%时金额为1.5倍","PE>70%时金额为0.5倍"),系统 SHALL 模拟智能定投策略。

5. WHEN 用户配置均线定投规则(如"当前价格<均线时金额为1.2倍"),系统 SHALL 模拟均线定投策略。

6. WHEN 系统完成定投计算,系统 SHALL 显示预期总投入、预期总收益、预期收益率、月均投入曲线。

7. WHEN 系统显示计算结果,系统 SHALL 同时显示普通定投和智能定投的对比数据。

8. WHILE 系统显示计算结果,系统 SHALL 标注"计算结果仅供参考,不保证未来收益"的风险提示。

#### 需求 5.2: 止盈止损提醒

**用户故事**: 作为进阶投资者,我希望设置止盈止损条件,以便在达到目标时及时锁定收益或控制损失。

**验收标准**:

1. WHEN 用户进入止盈止损设置页面,系统 SHALL 显示用户持有的基金列表。

2. WHEN 用户为某只基金设置止盈条件,系统 SHALL 支持设置止盈收益率或目标净值。

3. WHEN 用户为某只基金设置止损条件,系统 SHALL 支持设置止损回撤率或目标净值。

4. WHEN 用户设置止盈条件,系统 SHALL 每日监控基金是否达到止盈条件。

5. WHEN 基金达到止盈条件,系统 SHALL 向用户推送止盈提醒并说明触发原因。

6. WHEN 基金达到止损条件,系统 SHALL 向用户推送止损提醒并说明触发原因。

7. WHEN 用户修改或删除止盈止损条件,系统 SHALL 更新监控规则。

8. WHILE 系统监控止盈止损条件,系统 SHALL 基于每个交易日收盘后的净值数据。

#### 需求 5.3: 资讯聚合

**用户故事**: 作为进阶投资者,我希望在一个地方看到与投资相关的市场解读、基金公告和研报摘要,以便获取投资决策信息。

**验收标准**:

1. WHEN 用户进入资讯页面,系统 SHALL 显示市场解读、基金公告、研报摘要三个内容板块。

2. WHEN 系统展示资讯内容,系统 SHALL 在每条资讯上标注发布时间和内容来源。

3. WHEN 用户点击资讯标题,系统 SHALL 展示资讯全文内容。

4. WHEN 用户阅读基金公告,系统 SHALL 在相关基金详情页关联展示最新公告。

5. WHEN 用户关注某些主题或基金,系统 SHALL 在资讯页优先推送相关资讯。

6. WHEN 系统聚合第三方资讯,系统 SHALL 明确标注资讯来源(如XX券商研报、XX公司公告)。

7. WHILE 系统展示资讯,系统 SHALL 按时间倒序排列资讯内容。

#### 需求 5.4: 账户同步

**用户故事**: 作为进阶投资者,我希望导入我在其他平台的持仓数据,以便在一个地方统一管理所有投资。

**验收标准**:

1. WHEN 用户进入账户同步页面,系统 SHALL 显示支持导入的第三方平台列表(如天天基金、蛋卷基金、支付宝等)。

2. WHEN 用户选择第三方平台,系统 SHALL 引导用户授权账号。

3. WHEN 用户完成授权,系统 SHALL 通过第三方API导入持仓数据。

4. WHEN 系统导入持仓数据,系统 SHALL 显示导入进度和导入结果(成功导入XX只基金)。

5. WHEN 系统检测到重复持仓(基金代码相同),系统 SHALL 提示用户是否合并或覆盖。

6. WHEN 用户手动刷新同步,系统 SHALL 从第三方平台拉取最新持仓数据。

7. WHILE 系统维护第三方同步,系统 SHALL 每日自动同步持仓数据。

### 6. 通用功能

#### 需求 6.1: 用户账户管理

**用户故事**: 作为用户,我希望注册并管理我的账户,以便使用个性化功能并保存我的数据。

**验收标准**:

1. WHEN 用户点击"注册"按钮,系统 SHALL 显示注册表单(手机号/邮箱、密码、验证码)。

2. WHEN 用户提交注册信息且信息符合格式要求,系统 SHALL 创建新账户。

3. WHEN 用户点击"登录"按钮,系统 SHALL 显示登录表单(手机号/邮箱、密码)。

4. WHEN 用户提交登录信息且信息正确,系统 SHALL 验证用户身份并登录账户。

5. WHILE 用户已登录,系统 SHALL 显示用户昵称和账户设置入口。

6. WHEN 用户点击"退出登录",系统 SHALL 清除登录状态并返回首页。

7. WHEN 用户修改密码,系统 SHALL 要求输入旧密码进行验证。

8. WHEN 用户忘记密码,系统 SHALL 支持通过手机/邮箱验证重置密码。

#### 需求 6.2: 风险提示与免责声明

**用户故事**: 作为用户,我希望系统明确提示投资风险,以便我理性投资并了解风险承担。

**验收标准**:

1. WHEN 用户首次进入基金详情页,系统 SHALL 弹出"历史数据仅供参考,不构成投资建议"的风险提示。

2. WHEN 用户首次进入估值相关页面,系统 SHALL 弹出"估值分位点基于历史数据,未来表现可能不同"的风险提示。

3. WHEN 用户首次使用定投计算器或回测功能,系统 SHALL 弹出"计算结果仅供参考,不保证未来收益"的风险提示。

4. WHILE 系统展示任何业绩或收益数据,系统 SHALL 在页面显著位置标注风险提示。

5. WHEN 用户点击"我已了解"关闭风险提示,系统 SHALL 不再弹出该提示。

6. WHEN 用户在注册协议页点击"同意",系统 SHALL 视为用户接受免责条款。

#### 需求 6.3: 响应式设计

**用户故事**: 作为H5用户,我希望在不同尺寸的屏幕上都能获得良好的使用体验,以便随时访问应用。

**验收标准**:

1. WHEN 用户在手机端访问H5应用,系统 SHALL 适配手机屏幕尺寸和触摸操作。

2. WHEN 用户在平板设备访问H5应用,系统 SHALL 适配平板屏幕尺寸。

3. WHEN 用户在桌面浏览器访问H5应用,系统 SHALL 支持桌面端浏览。

4. WHILE 用户在不同设备间切换,系统 SHALL 保持数据一致性和登录状态。

5. WHEN 系统检测到用户使用移动设备,系统 SHALL 优化图表交互以支持触摸操作。

#### 需求 6.4: 性能要求

**用户故事**: 作为用户,我希望系统响应迅速,以便高效地使用应用功能。

**验收标准**:

1. WHEN 用户点击导航项,系统 SHALL 在1秒内完成页面跳转。

2. WHEN 用户提交筛选条件,系统 SHALL 在2秒内显示筛选结果。

3. WHEN 用户加载基金详情页,系统 SHALL 在3秒内完成页面渲染。

4. WHEN 系统执行估值回测计算,系统 SHALL 在10秒内完成计算并显示结果。

5. WHILE 系统处理用户请求,系统 SHALL 在加载过程中显示加载提示。

6. WHEN 系统发生网络错误,系统 SHALL 显示友好的错误提示并提供重试选项。

### 7. 数据管理

#### 需求 7.1: 基金基础数据管理

**用户故事**: 作为系统,我需要维护完整的基金基础数据库,以便支撑所有分析和展示功能。

**验收标准**:

1. WHEN 系统从数据源获取基金基础数据,系统 SHALL 存储基金代码、名称、类型、规模、成立日期、基金经理等基础信息。

2. WHEN 数据源更新基金基础数据,系统 SHALL 同步更新数据库。

3. WHILE 系统维护基金基础数据,系统 SHALL 每日检查并更新失效数据。

4. WHEN 基金发生重要变更(如合并、清盘),系统 SHALL 更新基金状态并通知相关用户。

5. WHEN 新基金成立,系统 SHALL 自动导入新基金的基础数据。

#### 需求 7.2: 基金净值数据管理

**用户故事**: 作为系统,我需要维护基金历史净值数据,以便计算收益、回撤等指标。

**验收标准**:

1. WHEN 系统每日收盘后获取基金净值数据,系统 SHALL 存储每只基金的单位净值和累计净值。

2. WHEN 系统存储净值数据,系统 SHALL 同时记录数据日期和数据源。

3. WHILE 系统维护净值数据,系统 SHALL 每日验证数据完整性。

4. WHEN 系统检测到净值数据异常,系统 SHALL 标记异常数据并启动数据修复流程。

5. WHEN 基金分红,系统 SHALL 记录分红信息并调整累计净值。

#### 需求 7.3: 基金持仓数据管理

**用户故事**: 作为系统,我需要维护基金定期披露的持仓数据,以便进行持仓穿透分析。

**验收标准**:

1. WHEN 基金季度报告披露,系统 SHALL 导入前十大重仓股/债及其持仓比例。

2. WHEN 基金半年报和年报披露,系统 SHALL 导入全部持仓明细。

3. WHILE 系统维护持仓数据,系统 SHALL 标注每个持仓数据的披露周期(季报/半年报/年报)。

4. WHEN 持仓数据过期超过180天,系统 SHALL 在分析页面提示用户数据可能已过时。

5. WHEN 基金调仓导致重仓股/债发生重大变化,系统 SHALL 更新持仓数据并通知相关用户。

#### 需求 7.4: 指数估值数据管理

**用户故事**: 作为系统,我需要维护指数历史估值数据,以便计算估值分位点并提供估值分析。

**验收标准**:

1. WHEN 系统每日收盘后获取指数估值数据(PE/PB/PS/股息率),系统 SHALL 存储当前值和历史值。

2. WHEN 系统存储估值数据,系统 SHALL 为每个指数维护5年和10年的历史数据区间。

3. WHILE 系统维护估值数据,系统 SHALL 每日计算并更新估值分位点。

4. WHEN 系统检测到估值数据异常(如PE为负或超过合理范围),系统 SHALL 标记异常数据。

5. WHEN 新指数发布,系统 SHALL 自动建立估值数据集并开始历史数据采集。

### 8. 增值服务

#### 需求 8.1: 高级指标服务

**用户故事**: 作为高级会员,我希望查看更深入的基金分析指标,以便做出更精准的投资决策。

**验收标准**:

1. WHEN 用户购买高级指标服务,系统 SHALL 开启高级指标查看权限。

2. WHEN 用户查看高级指标,系统 SHALL 显示持有预测(基于历史数据预测未来持仓变动)、风格漂移检测等高级分析。

3. WHEN 非会员用户尝试查看高级指标,系统 SHALL 显示"升级会员可查看此功能"的提示。

4. WHILE 系统维护高级指标,系统 SHALL 每日更新相关计算。

5. WHEN 用户会员到期,系统 SHALL 取消高级指标查看权限。

#### 需求 8.2: 深度回测服务

**用户故事**: 作为高级会员,我希望使用更强大的回测功能,以便全面验证投资策略。

**验收标准**:

1. WHEN 用户购买深度回测服务,系统 SHALL 开启高级回测功能权限。

2. WHEN 用户使用高级回测,系统 SHALL 支持自定义复杂的调仓规则(如基于技术指标、市场情绪等条件)。

3. WHEN 用户使用高级回测,系统 SHALL 支持多策略对比和优化(如寻找最优定投倍数)。

4. WHEN 非会员用户尝试使用高级回测,系统 SHALL 显示"升级会员可使用此功能"的提示。

5. WHEN 用户执行高级回测,系统 SHALL 提供更详细的回测报告(如各时间区间表现、极端情况分析)。

#### 需求 8.3: 专业研报服务

**用户故事**: 作为高级会员,我希望查看专业机构发布的深度研报,以便获取权威的投资分析。

**验收标准**:

1. WHEN 用户购买专业研报服务,系统 SHALL 开启研报查看权限。

2. WHEN 用户进入研报页面,系统 SHALL 显示最新的专业研报列表(券商研报、基金公司策略报告等)。

3. WHEN 用户点击研报标题,系统 SHALL 展示研报全文或摘要。

4. WHEN 系统推送研报,系统 SHALL 基于用户的持仓和关注主题推送相关研报。

5. WHEN 非会员用户尝试查看研报,系统 SHALL 显示"升级会员可查看研报"的提示。

6. WHILE 系统维护研报,系统 SHALL 每日更新研报库。

#### 需求 8.4: 智能调仓提醒服务

**用户故事**: 作为高级会员,我希望获得个性化的智能调仓建议,以便及时优化投资组合。

**验收标准**:

1. WHEN 用户购买智能调仓提醒服务,系统 SHALL 开启智能调仓提醒功能。

2. WHEN 系统分析用户持仓,系统 SHALL 基于估值、风格漂移、风险暴露等因素生成个性化调仓建议。

3. WHEN 系统生成调仓建议,系统 SHALL 推送详细的调仓方案(如"建议将XX基金仓位从30%降至25%,增加YY基金至20%")。

4. WHEN 用户查看调仓建议,系统 SHALL 显示建议的依据和预期效果。

5. WHEN 非会员用户,系统 SHALL 仅提供基础的调仓提醒(如经理变更、止盈止损等)。

6. WHILE 系统分析用户持仓,系统 SHALL 每周生成一次智能调仓建议。

### 9. 社区化功能

#### 需求 9.1: 组合分享

**用户故事**: 作为用户,我希望分享我的投资组合逻辑,以便与其他投资者交流并获得反馈。

**验收标准**:

1. WHEN 用户点击"分享组合",系统 SHALL 生成组合分享链接或二维码。

2. WHEN 用户分享组合,系统 SHALL 支持添加组合说明文字和投资逻辑。

3. WHEN 其他用户访问分享链接,系统 SHALL 显示组合的持仓结构、收益表现、风险指标等非敏感信息。

4. WHILE 系统展示分享组合,系统 SHALL 隐藏用户的实际持仓金额。

5. WHEN 用户取消分享,系统 SHALL 禁用分享链接。

6. WHEN 用户编辑组合说明,系统 SHALL 更新分享页面内容。

#### 需求 9.2: 组合跟投

**用户故事**: 作为用户,我希望跟投其他投资者分享的优秀组合,以便参考和学习他人的投资策略。

**验收标准**:

1. WHEN 用户查看其他用户的分享组合,系统 SHALL 显示"一键跟投"按钮。

2. WHEN 用户点击"一键跟投",系统 SHALL 创建模拟组合并自动配置相同的基金和比例。

3. WHEN 用户跟投组合,系统 SHALL 标注该组合为跟投组合并显示跟投来源。

4. WHEN 原组合发布者调仓,系统 SHALL 向跟投用户推送"组合调仓通知"。

5. WHILE 用户跟投组合,系统 SHALL 显示跟投后的实际收益与原组合收益的对比。

6. WHEN 用户停止跟投,系统 SHALL 取消自动同步并保留为独立模拟组合。

#### 需求 9.3: 组合验证

**用户故事**: 作为用户,我希望验证其他用户分享的组合逻辑,以便评估其投资策略的有效性。

**验收标准**:

1. WHEN 用户查看其他用户的分享组合,系统 SHALL 显示"验证组合"功能。

2. WHEN 用户点击"验证组合",系统 SHALL 显示组合的历史回测数据(假设该组合从更早的时间开始)。

3. WHEN 系统显示验证结果,系统 SHALL 显示组合在历史不同市场环境下的表现。

4. WHEN 用户分享组合,系统 SHALL 支持开启"允许其他用户验证"选项。

5. WHILE 系统进行组合验证,系统 SHALL 标注"验证结果为模拟数据,非实际历史表现"。

6. WHEN 用户查看验证结果,系统 SHALL 提供组合的风险收益评估和建议。

## 非功能需求

### 9.1 可用性

1. WHEN 用户访问H5应用,系统 SHALL 支持80%以上的主流移动浏览器(如iOS Safari、Chrome、微信浏览器)。

2. WHILE 系统运行,系统 SHALL 保持99.5%以上的服务可用性。

### 9.2 安全性

1. WHEN 用户注册或登录,系统 SHALL 使用HTTPS加密传输用户凭证。

2. WHILE 系统存储用户密码,系统 SHALL 使用加密哈希存储(如bcrypt)。

3. WHEN 系统提供账户同步功能,系统 SHALL 请求明确的用户授权并遵循OAuth协议。

4. WHILE 系统处理用户数据,系统 SHALL 遵守相关数据隐私法规(如GDPR、个人信息保护法)。

### 9.3 可扩展性

1. WHEN 系统面临高并发访问(如每日10万UV),系统 SHALL 保持响应时间在可接受范围内。

2. WHILE 系统运行,系统 SHALL 支持水平扩展以应对用户增长。

3. WHEN 系统数据量增长,系统 SHALL 支持数据库分库分表或使用分布式数据库。

### 9.4 可维护性

1. WHEN 系统部署新版本,系统 SHALL 支持热更新而不影响用户体验。

2. WHILE 系统运行,系统 SHALL 记录详细日志以便问题排查。

3. WHEN 系统发生错误,系统 SHALL 提供错误监控和报警机制。

### 9.5 数据准确性

1. WHEN 系统从数据源获取数据,系统 SHALL 验证数据完整性和准确性。

2. WHILE 系统计算量化指标,系统 SHALL 使用统一的计算方法确保结果一致性。

3. WHEN 系统展示数据,系统 SHALL 标注数据来源、更新时间和计算方法。

### 9.6 合规性

1. WHEN 系统展示基金数据,系统 SHALL 在显著位置标注"历史数据仅供参考,不构成投资建议"的风险提示。

2. WHILE 系统提供投资建议,系统 SHALL 明确区分数据分析和投资建议的边界。

3. WHEN 系统提供增值服务,系统 SHALL 遵循相关金融监管规定。

4. WHEN 用户注册账户,系统 SHALL 提供用户协议和隐私政策供用户确认。
